<view class="container"><view class="box-bg"><uni-nav-bar vue-id="7dff169c-1" shadow="{{true}}" backgroundColor="#44cf9a" left-icon="left" status-bar="{{true}}" data-event-opts="{{[['^clickLeft',[['handleBack']]]]}}" bind:clickLeft="__e" bind:__l="__l" vue-slots="{{['default','right']}}"><view data-event-opts="{{[['tap',[['saveChanges',['$event']]]]]}}" class="save-nav-btn" bindtap="__e" slot="right" wx:if="{{isEditMode}}">保存</view><view class="title-custom">个人信息</view></uni-nav-bar></view><view class="content"><view class="info-card"><view class="avatar-section"><block wx:if="{{!isEditMode}}"><view class="avatar-wrapper"><image class="avatar" src="{{userInfo.avatar||'../../../static/image/avatar.png'}}" mode="aspectFill"></image></view></block><block wx:else><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="avatar-upload-container" bindtap="__e"><block wx:if="{{avatar}}"><image class="{{[imageStyles]}}" src="{{avatar}}" mode="aspectFill"></image></block><block wx:else><uni-icons vue-id="7dff169c-2" type="plusempty" size="50" color="#999" bind:__l="__l"></uni-icons></block></view></block><text class="username">{{userInfo.username}}</text><text class="user-id">{{"ID: "+userInfo.userId}}</text></view><view class="info-list"><view class="info-item"><view class="info-label"><uni-icons vue-id="7dff169c-3" type="person" size="30" bind:__l="__l"></uni-icons><text>姓名</text></view><view class="info-value"><block wx:if="{{!isEditMode}}"><text class="display-value">{{userInfo.username}}</text></block><block wx:else><input type="text" placeholder="请输入姓名" data-event-opts="{{[['input',[['__set_model',['$0','username','$event',[]],['userInfo']]]]]}}" value="{{userInfo.username}}" bindinput="__e"/></block></view></view><view class="info-item"><view class="info-label"><uni-icons vue-id="7dff169c-4" type="staff" size="30" bind:__l="__l"></uni-icons><text>性别</text></view><view class="info-value"><block wx:if="{{!isEditMode}}"><text class="display-value">{{userInfo.gender===1?"男":"女"}}</text></block><block wx:else><picker mode="selector" range="{{genderOptions}}" data-event-opts="{{[['change',[['handleGenderChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{userInfo.gender===1?"男":"女"}}</view></picker></block></view></view><view class="info-item"><view class="info-label"><uni-icons vue-id="7dff169c-5" type="contact" size="30" bind:__l="__l"></uni-icons><text>年龄</text></view><view class="info-value"><block wx:if="{{!isEditMode}}"><text class="display-value">{{userInfo.age}}</text></block><block wx:else><view class="number-stepper"><view data-event-opts="{{[['tap',[['decrementAge',['$event']]]]]}}" class="stepper-btn minus" bindtap="__e"><uni-icons vue-id="7dff169c-6" type="minus" size="20" color="#64748b" bind:__l="__l"></uni-icons></view><text class="stepper-value">{{userInfo.age}}</text><view data-event-opts="{{[['tap',[['incrementAge',['$event']]]]]}}" class="stepper-btn plus" bindtap="__e"><uni-icons vue-id="7dff169c-7" type="plus" size="20" color="#64748b" bind:__l="__l"></uni-icons></view></view></block></view></view><view class="info-item"><view class="info-label"><uni-icons vue-id="7dff169c-8" type="location" size="30" bind:__l="__l"></uni-icons><text>城市</text></view><view class="info-value"><block wx:if="{{!isEditMode}}"><text class="display-value">{{userInfo.city}}</text></block><block wx:else><picker mode="region" data-event-opts="{{[['change',[['handleCityChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{userInfo.city}}</view></picker></block></view></view><view class="info-item"><view class="info-label"><van-icon vue-id="7dff169c-9" name="like-o" size="26px" data-com-type="wx" bind:__l="__l"></van-icon><text>健康状态</text></view><view class="info-value"><text class="display-value">{{userInfo.healthStatus===1?"健康":"生病"}}</text></view></view></view></view><button data-event-opts="{{[['tap',[['toggleEditMode',['$event']]]]]}}" class="{{['edit-btn',(isEditMode)?'cancel-btn':'']}}" bindtap="__e"><block wx:if="{{!isEditMode}}"><uni-icons vue-id="7dff169c-10" type="compose" size="18" color="#ffffff" bind:__l="__l"></uni-icons></block><text>{{isEditMode?'取消':'编辑个人信息'}}</text></button><block wx:if="{{isEditMode}}"><button data-event-opts="{{[['tap',[['saveChanges',['$event']]]]]}}" class="save-button" bindtap="__e"><uni-icons vue-id="7dff169c-11" type="save" size="18" color="#ffffff" bind:__l="__l"></uni-icons><text>保存修改</text></button></block></view></view>